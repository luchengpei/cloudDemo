{"version":3,"sources":["webpack:///E:/learn/weapp/my_blog/my_blog/components/cmform.vue?f9a9","webpack:///E:/learn/weapp/my_blog/my_blog/components/cmform.vue?66d3","webpack:///E:/learn/weapp/my_blog/my_blog/components/cmform.vue?1b1a","webpack:///E:/learn/weapp/my_blog/my_blog/components/cmform.vue?4e05","uni-app:///components/cmform.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA+H;AAC/H;AAC0D;AACL;;;AAGrD;AACuM;AACvM,gBAAgB,wMAAU;AAC1B,EAAE,4EAAM;AACR,EAAE,6FAAM;AACR,EAAE,sGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,iGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,6MAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;AClCA;AAAA;AAAA;AAAA;AAA0wB,CAAgB,uvBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACqD9xB,sF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,SACA,aADA,EAEA,YAFA,EADA,EAKA,uBACA,SACA,UADA,EAEA,QAFA,EAGA,eAHA,EAIA,cAJA,EAKA,aALA,EAMA,YANA,EAOA,WAPA,EAQA,QARA,EASA,QATA,EAUA,cAVA,GAYA,CAlBA,EAmBA,6BACA,eADA,CAEA;AACA,iDAHA,CAIA;AACA,+CALA,CAMA;AACA,GA1BA,EA2BA,WACA,6BACA,gBADA,CAEA;AACA,8BACA,eADA,EAEA,QACA,mBADA,EAEA,UACA,uBADA,EAEA;AACA,oBAHA,EAIA,iBAJA,EAFA,EAFA,EAWA,8BACA,wBACA,eACA,mCACA,sBACA,CAFA,MAEA,CACA,qBACA,CACA,yBACA,4BACA,CACA,4BAXA,CAYA;AACA;AACA,SAzBA,EA0BA,wBACA;AACA,SA5BA;;;AA+BA,KAnCA;AAoCA;AACA;AACA;AACA;AACA,uBADA;AAEA;AACA,6BADA;AAEA;AACA,mCADA;AAEA;AACA,6BAHA;AAIA,6BAJA,EAFA,EAFA;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BADA;AAEA,0BAFA;;AAIA;AACA;AACA,WAXA,MAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SA/BA;AAgCA;AACA;AACA,SAlCA;;;AAqCA,KA5EA;AA6EA;AACA;AACA;AACA;AACA;AACA,4BADA;AAEA,sBAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBADA;AAEA;AACA,6BADA;AAEA,wBAFA,EAFA;;AAMA;AACA;AACA;AACA,qCADA;;AAGA;AACA;AACA;AACA,SAdA;;AAgBA,KA5GA,EA3BA,E","file":"components/cmform.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./cmform.vue?vue&type=template&id=389de3ae&scoped=true&\"\nvar renderjs\nimport script from \"./cmform.vue?vue&type=script&lang=js&\"\nexport * from \"./cmform.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"389de3ae\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/cmform.vue\"\nexport default component.exports","export * from \"-!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cmform.vue?vue&type=template&id=389de3ae&scoped=true&\"","var components = {\n  uPopup: function() {\n    return import(\n      /* webpackChunkName: \"uview-ui/components/u-popup/u-popup\" */ \"@/uview-ui/components/u-popup/u-popup.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = Object.keys(_vm.list)\n\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.show = true\n    }\n\n    _vm.e1 = function($event) {\n      _vm.show = false\n    }\n  }\n\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0\n      }\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cmform.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\搜狗高速下载\\\\HBuilderX.1.8.2.20190401\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./cmform.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n\t\t<view class=\"text-gray padding justify-center flex\" v-if=\"Object.keys(list).length==0\" ><text>暂无评论</text></view>\r\n\t\t<view v-else id=\"comment-list\" class=\"comment-list\">\r\n\t\t\t\r\n\t\t\t<view class=\"cu-list menu-avatar comment\">\r\n\t\t\t\t<view class=\"cu-item\" v-for=\"(item,key) in list\" :key=\"key\">\r\n\t\t\t\t\t<view class=\"cu-avatar round\" :style=\"'background-image:url('+ item.user.avatar +'?x-oss-process=image/resize,m_fixed,w_100' +');'\"></view>\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<view class=\"text-grey\">{{item.user.nickname}}</view>\r\n\t\t\t\t\t\t<view class=\"text-gray text-content text-df\" :pid=\"item.id\" :title=\"'回复@'+item.nickname\" :reply_text=\"'回复@'+item.nickname\">\r\n\t\t\t\t\t\t\t{{item.content}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"flex justify-between\">\r\n\t\t\t\t\t\t\t<view class=\"text-gray text-df\">{{item.createTime}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t<view class=\"text-gray padding justify-center flex\" v-if=\"listShow\" @click=\"getList\"><text>查看更多评论</text></view>\r\n\t\t<view v-if=\"!unLogin\" class=\"padding-tb-xl margin-top-xl\">\r\n\t\t\t<view class=\"cu-bar foot bg-white justify-end flex\">\r\n\t\t\t\t<view class=\"padding-right-xl\">\r\n\t\t\t\t\t<button class=\"cu-btn bg-blue shadow lg\" @click=\"show = true\">写跟帖</button>\r\n\t\t\t\t</view>\t\t\r\n\t\t\t</view>\t\r\n\t\t</view>\r\n\t\t\r\n\t\t<u-popup v-model=\"show\" mode=\"bottom\">\r\n\t\t\t<view class=\"wrap\">\r\n\t\t\t\t<form @submit=\"cmFormSubmit\" class=\"\">\r\n\t\t\t\t\t<view style=\"display: none;\">\r\n\t\t\t\t\t\t<input type=\"text\" name=\"tablename\" :value=\"tablename\" />\r\n\t\t\t\t\t\t<input type=\"text\" name=\"objectid\" :value=\"objectid\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-form-group align-start\">\r\n\t\t\t\t\t\t<view class=\"title\">评论</view>\r\n\t\t\t\t\t\t<textarea name=\"content\" maxlength=\"-1\" placeholder=\"请输入内容\"></textarea>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"flex justify-center padding\">\r\n\t\t\t\t\t\t<button @click=\"show = false\" class=\"cu-btn shadow margin-right-xl bg-red\">取消</button>\r\n\t\t\t\t\t\t<button formType=\"submit\" class=\"cu-btn shadow bg-blue\">评论</button>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</form>\t\t\t\r\n\t\t\t</view>\t\t\t\r\n\t\t</u-popup>\r\n\t\t\n\t</view>\n</template>\n\n<script>\r\n\timport mdate from \"../common/date.js\"; \n\texport default {\r\n\t\tprops:{\r\n\t\t\ttablename:\"\",\r\n\t\t\tobjectid:\"\"\r\n\t\t},\n\t\tdata:function(){\r\n\t\t\treturn {\r\n\t\t\t\trscount:0,\r\n\t\t\t\tlist:[],\r\n\t\t\t\tcmFormClass:\"\",\r\n\t\t\t\tcmBtnClass:\"\",\r\n\t\t\t\tunLogin:true,\r\n\t\t\t\tssuserid:\"\",\r\n\t\t\t\tshow: false,\r\n\t\t\t\tstart: 0,\r\n\t\t\t\tlimit: 4,\r\n\t\t\t\tlistShow: true\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated:function(){\t\t \r\n\t\t\tthis.getPage();\r\n\t\t\t//start 检测登录\r\n\t\t\tthis.ssuserid=getApp().globalData.ssuserid;\r\n\t\t\t// console.log(getApp().globalData)\r\n\t\t\tthis.unLogin=getApp().globalData.unLogin;\t\t\t \r\n\t\t\t//End 检测是否登录 \r\n\t\t},\r\n\t\tmethods:{\r\n\t\t\tgetPage:function(){\r\n\t\t\t\tvar that=this;\r\n\t\t\t\t// console.log(this.objectid)\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname:\"comment\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tcloudAction:\"list\",\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\tobjectid: this.objectid,\r\n\t\t\t\t\t\t\t// tablename: this.tablename,\r\n\t\t\t\t\t\t\tstart: 0,\r\n\t\t\t\t\t\t\tlimit: this.limit,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(e){\r\n\t\t\t\t\t\tvar res = e.result.data;\r\n\t\t\t\t\t\tthat.list = []\r\n\t\t\t\t\t\tif(res.list.length < that.limit){\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tthat.listShow = false\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tthat.listShow = true\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tfor(var i in res.list){\r\n\t\t\t\t\t\t\tthat.list.push(res.list[i])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.start = 0 + that.limit;\r\n\t\t\t\t\t\t// console.log(that.start)\r\n\t\t\t\t\t\t// console.log(that.list)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(e){\r\n\t\t\t\t\t\t// console.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t \r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetList:function(){\r\n\t\t\t\tvar that=this;\r\n\t\t\t\t// console.log(this.objectid)\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname:\"comment\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tcloudAction:\"list\",\r\n\t\t\t\t\t\tparams:{\r\n\t\t\t\t\t\t\tobjectid: this.objectid,\r\n\t\t\t\t\t\t\t// tablename: this.tablename,\r\n\t\t\t\t\t\t\tstart: this.start,\r\n\t\t\t\t\t\t\tlimit: this.limit,\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(e){\r\n\t\t\t\t\t\tvar res = e.result.data;\r\n\t\t\t\t\t\tif(res.list.length < that.limit){\r\n\t\t\t\t\t\t\tfor(let i in res.list){\r\n\t\t\t\t\t\t\t\tthat.list.push(res.list[i])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.start = that.start + that.limit;\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:'没有评论了！',\r\n\t\t\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tthat.listShow = false\r\n\t\t\t\t\t\t\t// console.log(that.start)\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\t\tfor(let i in res.list){\r\n\t\t\t\t\t\t\t\tthat.list.push(res.list[i])\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.start = that.start + that.limit;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// console.log(that.list)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail:function(e){\r\n\t\t\t\t\t\t// console.log(e)\r\n\t\t\t\t\t}\r\n\t\t\t\t\t \r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcmFormSubmit:function(e){\t\t\t\r\n\t\t\t\tvar that=this;\r\n\t\t\t\tvar params=e.detail.value;\r\n\t\t\t\tif(params.content == ''){\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'评论内容不能为空！',\r\n\t\t\t\t\t\ticon:'none'\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.show = false\r\n\t\t\t\tparams.userid=this.ssuserid;\r\n\t\t\t\tparams.status=0;\r\n\t\t\t\tparams.createTime=new Date().Format(\"yyyy-MM-dd hh:mm:ss\");\r\n\t\t\t\tconsole.log(params,'aaaa')\r\n\t\t\t\tuniCloud.callFunction({\r\n\t\t\t\t\tname:\"comment\",\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\tcloudAction:\"save\",\r\n\t\t\t\t\t\tparams:params\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess:function(e){\r\n\t\t\t\t\t\tif(e.result.error){\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:e.result.message\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.getPage();\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\n\t}\n</script>\n\n<style lang=\"scss\" scoped>\n\n</style>\n"],"sourceRoot":""}